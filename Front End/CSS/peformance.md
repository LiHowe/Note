# 性能优化



## 重绘和重排 (reflow & repaint)

### 浏览器解析
浏览器解析html之后会生成 `DOM树` 和`渲染树`, 其中`DOM树`用来表示页面的结构, `渲染树`来表示DOM节点的展示形式

### 产生原因
改变DOM(显示在页面上的)的几何属性(存在, 位置, 大小, 边距)会引起重排, 浏览器窗口尺寸改变也会引起重排.

获取布局信息会导致渲染队列的刷新

### 优化

1. 合并对DOM和样式的修改(使元素脱离文档流 -> 进行样式变更 -> 放回文档中)
2. 延迟访问布局信息(不要在dom几何属性变化中进行获取)
3. js修改dom样式的时候尽可能使用`el.style.cssText = '新样式'` 或`el.style.cssText += ';新样式'`来进行样式更新, 或者使用修改dom`class`的方式来进行样式更新

使DOM脱离文档流的方法:
1. 隐藏元素, 修改元素后重新显示
2. 使用文档片段(fragment)`document.createDocumentFragment()`